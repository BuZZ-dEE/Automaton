Finite-state machine java implementation